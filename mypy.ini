[mypy]
plugins = pydantic.mypy

strict_optional = True

follow_imports = silent
warn_redundant_casts = True
warn_unused_ignores = False
check_untyped_defs = True

# Relaxed for gradual adoption - enable incrementally
disallow_untyped_defs = False

# Disable specific error codes that are common with SQLAlchemy legacy typing
disable_error_code = arg-type, return-value, assignment, attr-defined, var-annotated, override, misc, index, list-item, no-redef, union-attr

[pydantic-mypy]
init_forbid_extra = True
init_typed = True
warn_required_dynamic_aliases = True
warn_untyped_fields = True

# Ignore missing stubs for third-party libraries
[mypy-pytz.*]
ignore_missing_imports = True

[mypy-boto3.*]
ignore_missing_imports = True

[mypy-botocore.*]
ignore_missing_imports = True

[mypy-jose.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-feedgen.*]
ignore_missing_imports = True

[mypy-dramatiq.*]
ignore_missing_imports = True

[mypy-apscheduler.*]
ignore_missing_imports = True

[mypy-jieba.*]
ignore_missing_imports = True

[mypy-sentry_sdk.*]
ignore_missing_imports = True

[mypy-starlette.*]
ignore_missing_imports = True

[mypy-uvicorn.*]
ignore_missing_imports = True

[mypy-requests.*]
ignore_missing_imports = True

[mypy-whoosh.*]
ignore_missing_imports = True

[mypy-emails.*]
ignore_missing_imports = True

# Ignore all errors in test files for now - can be enabled gradually
[mypy-chafan_core.tests.*]
ignore_errors = True
